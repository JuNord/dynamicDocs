@startuml
!define table(x) class x << (T,#FFAAAA) >>
!define primary_key(x) <u>x</u>
!define foreign_key(x) <i>x</i>
!define primforeign_key(x) <u><i>x</i></u>
hide methods
hide stereotypes

User ||--o{ ProcessInstance
ProcessTemplate ||--o{ ProcessInstance
User ||--o{ ArchivePermission
ProcessInstance ||--o{ ArchivePermission
ProcessInstance ||--|{ Entry
PendingInstance ||--|| ProcessInstance
PendingInstance ||--|| User


table(User) {
    primary_key(Email : string)
    Password_Hash : string
    PermissionLevel : int
    Role : string
}

table(DocTemplate){
    primary_key(Id : string)
    File_Path : string
}

table(ProcessTemplate) {
    primary_key(Id : string)
    FilePath : string
    Description : string
}

table(PendingInstance){
    primforeign_key(Instance_Id : Int)
    primforeign_key(Responsible_user_id : string)
}

table(ProcessInstance){
    primary_key(Id : int)
    foreign_key(Template_ID : string)
    foreign_key(Owner_ID : int)
    CurrentStep : int
    Declined : bool
    Archived : bool
    Locked : bool
    Created : DateTime
    Changed : TimeStamp
    Subject : string
}

table(ArchivePermission){
    primforeign_key(ArchivedProcess_ID : int)
    primforeign_key(AuthorizedUser_ID : int)
}

table(Entry){
    primary_key(Entry_ID : int)
    foreign_key(Process_ID : int)
    FieldName : string
    Data : string   
}
@enduml