@startuml
Tag <|-- NamedTag
Tag <|-- Dialog
NamedTag <|-- BaseInputElement
NamedTag <|-- Process
NamedTag <|-- ProcessStep
BaseInputElement <|-- InputElement 
InputElement <|-- NumberInputBox
InputElement <|-- StudentDropdown
InputElement <|-- TeacherDropdown
InputElement <|-- TextInputBox

ProcessStep "*" --* "1" Process : -List<ProcessStep> _steps
Dialog "*" --* "1" ProcessStep : -List<Dialog> _dialogs
BaseInputElement "*" --* "1" Dialog : -List<BaseInputElement> _elements


+abstract class Tag
{
    +Parent : Tag { get; }
    +Tag(Tag parent)
}

+abstract class NamedTag
{
    +Name : string { get; private set; }
    +Description : string { get; private set; }

    ~NamedTag(Tag parent)
}

+abstract class InputElement<TControl, TValue>
{
    ~UiElement : TControl { get; }

    ~IsValidForProcess : Func<bool>  { private get; set; }
    ~FulfillsObligatory : Func<bool> { private get; set; }

    ~InputElement(Tag parent, TControl control)
    
    +abstract bool CheckValidForControl()  
    +abstract TValue GetValue()    
    +abstract void Clear()    
    
    +bool CheckValidForProcess()
    +bool CheckObligatory()
}

+abstract class BaseInputElement
{
    ~BaseInputElement(Tag parent)
}

+class NumberInputBox
{
    +NumberInputBox(parent : Tag, obligatory : bool = false, 
                    isValidForProcess : Func<bool> = null)
}

+class TextInputBox
{
    +TextInputBox(parent : Tag, obligatory : bool = false, 
                  isValidForProcess : Func<bool> = null)
}

+class StudentDropdown
{
    +StudentDropDown(parent : Tag, obligatory : bool = false, 
                    isValidForProcess : Func<bool> = null)
}

+class TeacherDropdown
{
    +TeacherDropDown(parent : Tag, obligatory : bool = false, 
                    isValidForProcess : Func<bool> = null)
}


+class Process
{ 
    +Process()

    +void AddStep(step : ProcessStep)
    +ProcessStep GetStepAtIndex(index : int)
}

+class ProcessStep
{  
    +ProcessStep(parent : Tag) 

    +void AddDialog(dialog : Dialog)
    +Dialog GetDialogAtIndex(index : int)
}
    
+class Dialog
{
    +Dialog(parent : Tag)
    
    +void AddElement(element : BaseInputElement)
    +BaseInputElement GetElementAtIndex(index : int)
    +BaseInputElement GetElementByName(name : string)
}
@enduml